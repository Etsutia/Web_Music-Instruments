USE MASTER
GO
IF EXISTS (SELECT * FROM SYSDATABASES WHERE name='NHACCU')
		DROP DATABASE NHACCU
GO
CREATE DATABASE NHACCU
GO
USE NHACCU
GO
CREATE TABLE NGUOIDUNG  (  TENDANGNHAP NVARCHAR(30) PRIMARY KEY ,
						   MATKHAU NVARCHAR(50),
						   HOVATEN NVARCHAR(50),
						   SDT NVARCHAR(10) CHECK (SDT LIKE '[0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]'),
						   DIACHI NVARCHAR(50),
						   EMAIL NVARCHAR(50),
						   QUYEN_HAN NVARCHAR(50) CHECK( QUYEN_HAN IN('KHACHHANG', 'QUANTRI')),
)
CREATE TABLE LOAISANPHAM  (  MALOAISANPHAM NVARCHAR(12) PRIMARY KEY ,
						     TENLOAISANPHAM NVARCHAR(50),
)
CREATE TABLE SANPHAM  (  MASANPHAM NVARCHAR(12) PRIMARY KEY ,
                         MALOAISANPHAM NVARCHAR(12),
						 TENSANPHAM NVARCHAR(100),
						 GIATIEN INT,
						 SOLUONG INT,
						 ANH NVARCHAR(200),
						 FOREIGN KEY (MALOAISANPHAM) REFERENCES LOAISANPHAM(MALOAISANPHAM),
						 
)
CREATE TABLE GIOHANG ( MASANPHAM NVARCHAR(12),
                       TENDANGNHAP NVARCHAR(30),
					   TENSANPHAM NVARCHAR(100),
					   SOLUONG INT,
					   GIATIEN INT,
					   TONGTIEN FLOAT,
					   PRIMARY KEY(MASANPHAM),
					   FOREIGN KEY (MASANPHAM) REFERENCES SANPHAM(MASANPHAM),
					   FOREIGN KEY (TENDANGNHAP) REFERENCES NGUOIDUNG(TENDANGNHAP),
)
CREATE TABLE HOADON (  MASANPHAM NVARCHAR(12),
                       HOVATEN NVARCHAR(50),
					   TENSANPHAM NVARCHAR(100),
					   SOLUONG INT,
					   GIATIEN INT,
					   TONGTIEN FLOAT,
					   TINHTRANGTHANHTOAN NVARCHAR(20) CHECK( TINHTRANGTHANHTOAN IN('THANHCONG', 'THATBAI')),
					   PRIMARY KEY(MASANPHAM),
					   FOREIGN KEY (MASANPHAM) REFERENCES SANPHAM(MASANPHAM),
)
INSERT INTO NGUOIDUNG VALUES (N'ptd',N'123', N'Phan Thành Đạt', N'0982382124',N'Điện Biên Phủ-Bình Thạnh', N'ptd@gmail.com', N'KHACHHANG')
INSERT INTO NGUOIDUNG VALUES (N'admin',N'000', N'Đạt admin', N'0292182451', N'Điện Biên Phủ', N'datp@gmail.com',N'QUANTRI')

INSERT INTO LOAISANPHAM VALUES (N'PIA',N'Piano')
INSERT INTO LOAISANPHAM VALUES (N'GUI',N'Guitar')
INSERT INTO LOAISANPHAM VALUES (N'TRN',N'Trống')

INSERT INTO SANPHAM VALUES (N'PIA-YDP',N'PIA',N'Đàn Piano Yamaha YDP 105R',19200000 ,7,N'dan-piano-roland.jpg')
INSERT INTO SANPHAM VALUES (N'PIA-PS',N'PIA',N'Đàn Piano Yamaha PS500',39425000 ,3,N'dan-piano-dien-yamaha-p-s500-đen_2331.jpg')
INSERT INTO SANPHAM VALUES (N'PIA-FP',N'PIA',N'Đàn Piano Roland FP',19200000 ,3,N'dan-piano-dien-roland-fp-e50.jpg')
INSERT INTO SANPHAM VALUES (N'PIA-JU',N'PIA',N'Đàn Piano Yamaha JU109',31425000 ,2,N'Dan-Piano-Yamaha-JU109PE.jpg')
INSERT INTO SANPHAM VALUES (N'PIA-CVP',N'PIA',N'Đàn Piano Clavivona Yamaha CVP',13890000 ,3,N'Dan-Piano-Clavionva-Yamaha-CVP-701B.jpg')
INSERT INTO SANPHAM VALUES (N'PIA-CSP',N'PIA',N'Đàn Piano Yamaha CSP',19200000 ,4,N'dan-piano-dien-yamaha-p225wh_1513.jpg')
INSERT INTO SANPHAM VALUES (N'PIA-CCSP',N'PIA',N'Đàn Piano điện Yamaha Clavivova CSP',21800000 ,5,N'Dan-Piano-dien-Yamaha-Clavinova-CSP-150WH.jpg')

INSERT INTO SANPHAM VALUES (N'GUI-GC200',N'GUI',N'Đàn Guitar Classic GC20',3720000 ,8,N'dan-guitar-classic-gc-20hv_3424.jpg')
INSERT INTO SANPHAM VALUES (N'GUI-CGS',N'GUI',N'Đàn Guitar Classic CGS',3890000 ,6,N'Dan-Classic-Guitar-CGS102A.jpg')
INSERT INTO SANPHAM VALUES (N'GUI-C50',N'GUI',N'Đàn Guitar điện Cort C50',1425000 ,6,N'dan-guitar-dien-cort-cr50-black.jpg')
INSERT INTO SANPHAM VALUES (N'GUI-GC14',N'GUI',N'Đàn Guitar Classic GC14',2800000 ,8,N'dan-guitar-classic-gc-14hl_7533.jpg')
INSERT INTO SANPHAM VALUES (N'GUI-JR2',N'GUI',N'Đàn Guitar Acoustic Yamaha JR2',3890000 ,12,N'Dan-Acoustic-guitar.jpg')
INSERT INTO SANPHAM VALUES (N'GUI-C1WB',N'GUI',N'Đàn Guitar Crodoba C1WB',4770000 ,7,N'dan-guitar-cordoba.jpg')

INSERT INTO SANPHAM VALUES (N'TRN-EX',N'TRN',N'Bộ trống Pearl Export EX',11425000 ,5,N'Bo-trong-JAZZ-Pearl-Export-EXX725FP.jpg')
INSERT INTO SANPHAM VALUES (N'TRN-DMP',N'TRN',N'Bộ trống Jazz Pearl DMP',13290000 ,8,N'Bo-trong-JAZZ-Pearl-DMP925SP-C.jpg')
INSERT INTO SANPHAM VALUES (N'TRN-EXX',N'TRN',N'Bộ trống Jazz Pearl EXX7',11800000 ,3,N'bo-trong-jazz-pearl-exx705np-c760.jpg')
INSERT INTO SANPHAM VALUES (N'TRN-RDP',N'TRN',N'Bộ trống Jazz Yamaha RDP',13720000 ,4,N'bo-trong-jazz-yamaha-rdp2f5-deep-blue-sunburt.jpg')
INSERT INTO SANPHAM VALUES (N'TRN-PSC',N'TRN',N'Bộ trống Pearl Roadshow PSC',11800000 ,5,N'bo-trong-pearl-roadshow.png')

INSERT INTO GIOHANG VALUES (N'TRN-PSC',N'ptd',N'Bộ trống Pearl Roadshow PSC', 1, 11800000, 11800000)

INSERT INTO HOADON VALUES (N'TRN-PSC',N'Phan Thành Đạt',N'Bộ trống Pearl Roadshow PSC', 1, 11800000, 11800000,N'THANHCONG')
INSERT INTO HOADON VALUES (N'GUI-JR2',N'Nguyễn Minh Hiếu',N'Đàn Guitar Acoustic Yamaha JR2', 2, 3890000, 7780000,N'THATBAI')


---------------------------------
SELECT * FROM SANPHAM

SELECT * 
FROM SANPHAM INNER JOIN LOAISANPHAM ON SANPHAM.MALOAISANPHAM = LOAISANPHAM.MALOAISANPHAM
WHERE LOAISANPHAM.TENLOAISANPHAM = N'Guitar'



SELECT * FROM HOADON

SELECT TENDANGNHAP, HOVATEN, SDT, EMAIL, DIACHI
FROM NGUOIDUNG

SELECT * FROM NGUOIDUNG
WHERE TENDANGNHAP = N'ptd'



DELETE GIOHANG

SELECT * FROM GIOHANG